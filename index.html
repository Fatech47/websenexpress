<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SenExpress - Livraison Express</title>
  <!-- Feuille de styles principale -->
  <link rel="stylesheet" href="css/styles.css" />
  <!-- Leaflet CSS pour la carte -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- FontAwesome pour les ic√¥nes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        integrity="sha512-papNMUS1zfKxQgh4GQ4pFKq+6/9+zC6jqb6eRHi8/bsK2m+Q3iRR6ZtiE1O3O6kyo8+RiKxR+UA3Ej4Vf8X+ag==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <!-- Toast de confirmation -->
  <div id="toast" class="toast">Inscription r√©ussie !</div>

  <!-- En-t√™te : logo, titre et basculeur de th√®me -->
  <header role="banner">
    <div class="header-container">
      <a href="index.html">
        <img src="assets/logo.png" alt="Logo SenExpress" class="logo" />
      </a>
      <h1>SenExpress</h1>
      <button id="toggleTheme" aria-label="Basculer entre le mode clair et sombre">
        <span aria-hidden="true">üåì</span>
      </button>
    </div>
  </header>

  <!-- Navigation principale -->
  <nav class="sticky-nav" role="navigation" aria-label="Navigation principale">
    <ul class="nav-links">
      <li><a href="#homeSection">Accueil</a></li>
      <li><a href="#livreursSection">Livreurs</a></li>
      <li><a href="#dashboardSection">Tableau de bord</a></li>
    </ul>
  </nav>

  <!-- Section h√©ro anim√©e -->
  <section id="homeSection" class="hero-section">
    <div class="hero-content">
      <h2>La livraison express r√©invent√©e</h2>
      <p>Profitez de notre service rapide et fiable pour vos livraisons au quotidien.</p>
      <button onclick="scrollToSection('livreursSection')">Voir nos livreurs</button>
    </div>
  </section>

  <!-- Section Liste des livreurs -->
  <section id="livreursSection">
    <h2>Livreurs Disponibles</h2>
    <!-- Barre de recherche -->
    <input type="text" id="searchDrivers" placeholder="Rechercher un livreur‚Ä¶" oninput="updateDriversList(this.value)" />
    <div id="driversList" class="drivers-list"></div>
    <!-- Pagination -->
    <div id="pagination" class="pagination"></div>
    <div class="btn-container">
      <button onclick="showModal('registrationModal')" class="action-btn">Devenir Livreur</button>
    </div>
    <!-- Conteneur de la carte -->
    <div id="mapContainer" class="map-container"></div>
  </section>

  <!-- Tableau de bord -->
  <section id="dashboardSection">
    <h2>Tableau de bord - Historique des livreurs</h2>
    <!-- Barre de recherche pour le tableau de bord -->
    <input type="text" id="searchDashboard" placeholder="Rechercher dans l'historique‚Ä¶" oninput="updateDashboard(this.value)" />
    <div id="dashboardList" class="dashboard-list"></div>
  </section>

  <!-- Modal d'inscription -->
  <div id="registrationModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content animate-modal">
      <span class="close-modal" onclick="closeModal('registrationModal')" aria-label="Fermer">&times;</span>
      <h2>Inscription Livreur</h2>
      <form id="driverForm" onsubmit="event.preventDefault(); processRegistration();">
        <input type="text" id="driverName" placeholder="Nom complet" required />
        <input type="text" id="driverVehicle" placeholder="V√©hicule" required />
        <input type="number" id="driverPrice" placeholder="Prix (FCFA)" required />
        <input type="tel" id="driverPhone" placeholder="T√©l√©phone" required />
        <!-- Champ de fichier pour l'image de profil -->
        <label for="driverPhoto">Photo de profil (optionnelle) :</label>
        <input type="file" id="driverPhoto" accept="image/*" />
        <!-- Zone de pr√©visualisation de la photo de profil -->
        <img id="photoPreview" class="profile-photo-preview" src="#" alt="Pr√©visualisation de la photo" style="display: none;" />
        <button type="submit" class="action-btn">S'inscrire et Payer</button>
      </form>
    </div>
  </div>

  <!-- Modal de paiement (QR code statique + montant affich√©) -->
  <div id="paymentModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content animate-modal payment-content">
      <span class="close-modal" onclick="closeModal('paymentModal')" aria-label="Fermer">&times;</span>
      <img src="assets/wave_qr.png" alt="QR Code Paiement" class="qr" />
      <div class="payment-info">
        <span>Montant √† payer :</span>
        <span class="price">2000 FCFA</span>
      </div>
      <button onclick="confirmPayment()" class="action-btn">J'ai pay√©</button>
    </div>
  </div>

  <!-- Inclusion des scripts JavaScript -->
  <!-- Leaflet JS pour la carte -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="js/app.js"></script>
  <!-- Script de pr√©visualisation de photo -->
  <script>
    const photoInput = document.getElementById('driverPhoto');
    const photoPreview = document.getElementById('photoPreview');

    if (photoInput) {
      photoInput.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            photoPreview.src = e.target.result;
            photoPreview.style.display = 'block';
          };
          reader.readAsDataURL(file);
        } else {
          photoPreview.src = '#';
          photoPreview.style.display = 'none';
        }
      });
    }
  </script>
</body>
</html>
